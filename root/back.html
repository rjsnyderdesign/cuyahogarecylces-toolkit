<!DOCTYPE html>
<html lang="en-US">

  <head>

    <!-- meta tags -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>CuyahogaRecycles | Home</title>

    <!-- stylesheets -->
    <link type="text/css" href="../dist/css/bootstrap.css" rel="stylesheet" />
    <link type="text/css" href="../dist/css/bootstrap-theme.css" rel="stylesheet" />
    <link type="text/css" href="../root/css/font-awesome.min.css" rel="stylesheet" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Typekit font kit -->
    <script src="https://use.typekit.net/nrs3tja.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>

  </head>

  <body>

    <header class="page-header bg-blue" role="banner">

      <div class="container-fluid page-header-upper">
        <div class="page-header-upper-content">
          <button class="action-open-menu navbar-toggle pull-left" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <div class="brand">
            <a href="#">
              <img
                class="brand-logo-main"
                alt="CuyahogaRecycles.org"
                title="CuyahogaRecycles.org"
                src="../root/img/logos/SWDN_Logos_Campaign_Stacked.png"
              />
            </a>
          </div><!-- /.brand -->
          <div class="page-header-upper-right">
            <a class="pull-right login-link" href="#">Log Out</a>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </header>

    <main role="main">
      <div class="container-fluid">
        <div class="row material-header clearfix">
						<h2>Postcard <span class="fw-normal">| Lorem Ipsum</span></h2>
						<ul class="list-inline progress-nav">
							<li>STEPS:</li>
							<li>1. Front</li>
							<li class="current">2. Back</li>
							<li>3. Proof</li>
							<li>4. Export PRESS PDF</li>
						</ul>
        </div><!-- /.row -->
        <div class="custom-material clearfix">
					<div class="main-image">
						<img src="../root/img/materials/postcard-back-1.jpg" />
						<div class="textarea-container postcard-back-1">
							<textarea class="editable-field wysiwyg" rel="wysiwyg" rows="2"></textarea>
							<div class="red-lines"></div>
						</div>
						<div class="editable-field logo-container" rel="logo">
							<img src="http://placehold.it/300x300" />
						</div>
					</div>
					<a href="../root/proof.html" class="btn btn-green pull-right">Next</a>
					<a href="../root/back-choose.html" class="red-text pull-left">Choose another design</a>
      </div><!-- /.container-fluid -->
    </main>

    <footer class="page-footer" role="contentinfo">
      <div class="container-fluid">
        <div class="row">
          <div class="col-sm-12 page-footer-col-siteinfo">
            <span>Lorem ipsum dolor sit amet.</span>
          </div><!-- /.col-*-* -->
        </div><!-- /.row -->
				
      </div><!-- /.container-fluid -->
    </footer>

    <!-- scripts -->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script type="text/javascript" src="../dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../js/tooltip.js"></script>
		<script>
		$(function () {
			// WYSIWYG Popover
	  	$("[rel=wysiwyg]").popover({
		    trigger : 'manual',  
		    placement : 'right', 
		    html: 'true',
				title: 'Format your text:', 
		    content : '<label>Alignment:</label>'+
									'<div class="row">'+
									'<div class="col-sm-4">'+
									'<a href="#" class="fa-align-left fa"></a>'+
									'</div>'+
									'<div class="col-sm-4">'+
									'<a href="#" class="fa-align-center fa"></a>'+
									'</div>'+
									'<div class="col-sm-4">'+
									'<a href="#" class="fa-align-right fa"></a>'+
									'</div>'+
									'</div>'+
									'<label>Point Size:</label>'+
									'<div class="row">'+
									'<div class="col-sm-4">'+
									'<select class="col-sm-4">'+
									'<option>10</option><option>11</option><option>12</option><option selected>13</option>'+
									'</select>'+
									'</div>'+
									'</div>',
		    template: '<div class="popover format-text"><div class="arrow"></div>'+
									'<div class="too-many-characters" style="display:none;"><h2 class="fa fa-exclamation"></h2><p>Your copy contains too<br />many characters.</p></div>'+
		              '<h3 class="popover-title"></h3><div class="popover-content">'+
		              '</div><div class="popover-footer"><a href="#" class="fa fa-check confirm-wysiwyg pull-right"></a></div>' 
			});
			$("[rel=wysiwyg]").on('click', function() {
				$("[rel=wysiwyg]").popover('show');
			});
			
			$("[rel=wysiwyg]").on('show.bs.popover', function() {
				$('.textarea-container').addClass('selected');
			});
			
			$("[rel=wysiwyg]").on('hide.bs.popover', function() {
				$('.textarea-container').removeClass('selected');
			});
			
			$('.textarea-container textarea').keyup(function () {
			    var max = 25;
			    var len = $(this).val().length;
			    if (len >= max) {
			        $(".format-text .too-many-characters").show();
			    } else {
			        var ch = max - len;
			        $(".format-text .too-many-characters").hide();
			    }
			});
		
			$(document).on("click", ".confirm-wysiwyg", function(e) {
				e.preventDefault();
					$("[rel=wysiwyg]").popover('hide');
					$('.textarea-container').addClass('confirmed');	
				
			});
			
			// Logo Popover
	  	$("[rel=logo]").popover({
		    trigger : 'manual',  
		    placement : 'left', 
		    html: 'true',
		    content : '<label>Upload new logo:</label>'+
									'<form action="" method="post" enctype="multipart/form-data" id="js-upload-form">'+
										'<div class="form-inline">'+
				              '<div class="form-group">'+
				                '<input type="file" name="files[]" id="js-upload-files" style="display: none;">'+
				              '</div>'+
				            '</div>'+
				          '</form>'+

				          '<div class="upload-drop-zone" id="drop-zone">Drop files here<br />or<br/><a href="#" class="btn btn-hollow" id="open-upload">Select Files</a></div>',
		    template: '<div class="popover upload-logo"><div class="arrow"></div>'+
		              '<div class="popover-content">'+
		              '</div><div class="popover-footer"><a href="#" class="fa fa-check confirm-logo pull-right" id="js-upload-submit"></a></div>' 
			});
			
			$("[rel=logo]").on('click', function() {
				$("[rel=logo]").popover('show');
				
				$('#open-upload').click(function(){
						$('#js-upload-files').trigger('click'); 
				});
				
				// UPLOAD CLASS DEFINITION
		    // ======================
				// Elements aren't in the DOM until the popover is opened

		    var dropZone = document.getElementById('drop-zone');
		    var uploadForm = document.getElementById('js-upload-form');

		    var startUpload = function(files) {
					console.log(files);
					$('#js-upload-submit').addClass('confirm');
		    }

		    uploadForm.addEventListener('submit', function(e) {
		        var uploadFiles = document.getElementById('js-upload-files').files;
		        e.preventDefault()

		        startUpload(uploadFiles)
		    })

		    dropZone.ondrop = function(e) {
		        e.preventDefault();
		        this.className = 'upload-drop-zone';

		        startUpload(e.dataTransfer.files)
		    }

		    dropZone.ondragover = function() {
		        this.className = 'upload-drop-zone drop';
		        return false;
		    }

		    dropZone.ondragleave = function() {
		        this.className = 'upload-drop-zone';
		        return false;
		    }
			});
			
			$("[rel=logo]").on('show.bs.popover', function() {
				$('.logo-container').addClass('selected');
			});
			
			$("[rel=logo]").on('hide.bs.popover', function() {
				$('.logo-container').removeClass('selected');
			});
			
			$(document).on("click", ".confirm-logo", function(e) {
				e.preventDefault();
					$("[rel=logo]").popover('hide');
					$('.logo-container').addClass('confirmed');	
				
			});
			
			
			
		});
		</script>
    <!-- /scripts -->
		

  </body>

</html>
